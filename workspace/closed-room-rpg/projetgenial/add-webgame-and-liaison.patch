*** Begin Patch
+ - webgame/src/main.js
+ - webgame/data/world.json
+ - webgame/tools/CONTENT_SCHEMA.json
+ - webgame/tools/prompts.md
+ - webgame/tools/generate-content.mjs
+
+next_steps:
+ - title: "Valider le JSON à l'exécution (Ajv)"
+ suggested_by: "ChatGPT"
+ path: "webgame/src/main.js"
+ details: "Charger Ajv en ESM, valider world.json contre CONTENT_SCHEMA.json et
+ afficher les erreurs lisibles pour les IA."
+ - title: "Inventaire minimal"
+ details: "Étendre engine avec inventory + actions addItem/removeItem et conditions hasItem."
+ - title: "Brancher l'API LLM"
+ details: "Remplacer le stub de generate-content.mjs par un appel réel à l'API choisie."
+
+ai_collaboration_protocol:
+ purpose: |
+ Ce fichier sert de carnet de liaison inter‑IA. Chaque IA lit ce fichier avant
+ d'agir, puis consigne ce qu'elle a fait dans `completed_steps` et, si pertinent,
+ met à jour `current_state` et `next_steps`.
+ rules:
+ - Lire entièrement `PROJECT_LIAISON.yaml` avant toute modification.
+ - Respecter `tools/CONTENT_SCHEMA.json` pour tout JSON produit.
+ - Éviter de casser la compatibilité: préférer des ajouts optionnels.
+ - Documenter chaque changement avec date (UTC), auteur, description claire.
+ - Ne pas stocker de secrets ici; utiliser des variables d'environnement.
+ how_to_update:
+ - Ajouter une entrée à `completed_steps` (au lieu de réécrire l'historique).
+ - Mettre `updated_at` à la date courante en UTC.
+ - Si vous introduisez de nouveaux champs, documentez‑les sous `schema_notes`.
+
+schema_notes:
+ - note: "Les actions supportées: moveTo, appendDialogue, setFlag, if/then (imbriqué)."
+ - note: "Le moteur rend les NPC par room via npcIds."
+
+communication_shortcuts:
+ prompts_examples:
+ - role: "Designer"
+ goal: "Générer un monde de 3 rooms avec une mini-quête"
+ prompt_ref: "webgame/tools/prompts.md"
+ - role: "Engineer"
+ goal: "Ajouter un champ image pour les rooms et l'afficher"
+ guidance: "Modifier schema + engine + main + data/world.json de démo"
+
+risks:
+ - "JSON mal formé → page vide. Mitigation: valider + message d'erreur clair."
+ - "Évolutions non rétrocompatibles du schéma. Mitigation: versionner le schéma."
+
*** End Patch